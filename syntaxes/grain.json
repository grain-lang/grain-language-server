{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Grain",
	"patterns": [
		{
			"include": "#top-level-statements"
		}
	],
	"repository": {
		"bindings": {
			"patterns": [
				{
					"match": "\\b(let\\b\\s*rec|let)\\b\\s*([a-z]\\w*)\\s*(:.*)?(=)(?=.*=>)",
					"captures": {
						"1": {
							"name": "storage.type.grain"
						},
						"2": {
							"name": "entity.name.function.grain"
						},
						"3": {
							"patterns": [
								{ "include": "#type-annotations" }
							]
						},
						"4": {
							"name": "keyword.operator.grain"
						}
					}
				},
				{
					"comment": "Support for highlighting while typing a function definition.",
					"begin": "\\b(let\\b\\s*rec|let)\\b\\s*([a-z]\\w*)\\s*(:.*)?(=)\\s*\\(",
					"end": "\\)",
					"beginCaptures": {
						"1": {
							"name": "storage.type.grain"
						},
						"2": {
							"name": "entity.name.function.grain"
						},
						"3": {
							"patterns": [
								{ "include": "#type-annotations" }
							]
						},
						"4": {
							"name": "keyword.operator.grain"
						}
					},
					"patterns": [
						{ "include": "#binding-destructure" }
					]
				},
				{
					"match": "\\b(let\\b\\s*rec|let)\\b\\s*([a-z]\\w*)\\s*(:.*)?(=)(?=\\s*pattern\\b)",
					"captures": {
						"1": {
							"name": "storage.type.grain"
						},
						"2": {
							"name": "entity.name.function.grain"
						},
						"3": {
							"patterns": [{
								"include": "#type-annotations"
							}]
						},
						"4": {
							"name": "keyword.operator.grain"
						}
					}
				},
				{
					"begin": "\\b(let\\b\\s*rec|let)\\b\\s*\\(",
					"end": "\\)\\s*(:.*)?(=)",
					"beginCaptures": {
						"1": { "name": "storage.type.grain" }
					},
					"endCaptures": {
						"1": {
							"patterns": [{
								"include": "#type-annotations"
							}]
						},
						"2": { "name": "keyword.operator.grain" }
					},
					"patterns": [
						{ "include": "#binding-destructure" }
					]
				},
				{
					"match": "\\b(let\\b\\s*rec|let)\\b\\s*([a-z]\\w*)\\s*(:.*)?(=)",
					"captures": {
						"1": {
							"name": "storage.type.grain"
						},
						"2": {
							"name": "variable.name.grain"
						},
						"3": {
							"patterns": [{
								"include": "#type-annotations"
							}]
						},
						"4": {
							"name": "keyword.operator.grain"
						}
					}
				},
				{
					"match": "\\b(let\\b\\s*rec|let)\\b\\s*([a-z]\\w*)\\b\\s*(:.*)?",
					"captures": {
						"1": {
							"name": "storage.type.grain"
						},
						"2": {
							"name": "variable.name.grain"
						},
						"3": {
							"patterns": [
								{ "include": "#type-annotations" }
							]
						}
					}
				}
			]
		},
		"binding-destructure": {
			"patterns": [
				{
					"begin": "(?=\\()",
					"end": "(?<=\\))",
					"patterns": [
						{ "include": "#binding-destructure" }
					]
				},
				{ "include": "#typed-identifier" }
			]
		},
		"comments": {
			"match": "#.*$",
			"name": "comment.line.grain"
		},
		"type-args": {
			"patterns": [{
				"match": "(\\b[a-z]\\w*\\b)(,)?",
				"captures": {
					"1": { "name": "variable.parameter.grain" },
					"2": { "name": "punctuation.definition.parameters.begin.grain" }
				}
			}]
		},
		"type-constructor": {
			"patterns": [
				{
					"begin": "(\\b[A-Z]\\w*\\b)\\s*(?=<)",
					"end": "(?<=>)",
					"beginCaptures": {
						"1": {
							"name": "entity.name.type.grain"
						}
					},
					"patterns": [
						{ "include": "#type-vector" }
					]
				},
				{
					"match": "(\\b[A-Z]\\w*\\b)",
					"captures": {
						"1": {
							"name": "entity.name.type.grain"
						}
					}
				}
			]
		},
		"type": {
			"patterns": [
				{
					"begin": "(\\()",
					"end": "(\\))",
					"beginCaptures": {
						"1": { "name": "punctuation.definition.parameters.begin.grain" }
					},
					"endCaptures": {
						"1": { "name": "punctuation.definition.parameters.end.grain" }
					},
					"patterns": [
						{
							"match": "(,)",
							"captures": {
								"1": {
									"name": "punctuation.definition.parameters.grain"
								}
							}
						},
						{ "include": "#type" }
					]
				},
				{
					"match": "(<)",
					"captures": {
						"1": { "name": "punctuation.definition.parameters.begin.grain" }
					}
				},
				{
					"match": "(->)",
					"captures": {
						"1": { "name": "keyword.operator.grain" }
					}
				},
				{ "include": "#type-args" },
				{ "include": "#type-constructor" }
			]
		},
		"type-annotations": {
			"patterns": [
				{
					"match": "(:)\\s*(\\(\\w+(<.*?>)?(\\s*,\\s*(\\w+(<.*?>)?))*\\)\\s*->\\s*\\w+(<.*?>)?)",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#type" }] }
					}
				},
				{
					"match": "(:)\\s*(\\(\\w+(<.*?>)?(\\s*,\\s*(\\w+(<.*?>)?))*\\)\\s*->\\s*\\(.*\\))",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#type" }] }
					}
				},
				{
					"match": "(:)\\s*(\\w+(<.*?>)?\\s*->\\s*\\w+(<.*?>)?)",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#type" }] }
					}
				},
				{
					"match": "(:)\\s*(\\w+(<.*?>)?\\s*->\\s*\\(.*\\))",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#type" }] }
					}
				},
				{
					"match": "(:)\\s*(\\w+(<.*?>)?)",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#type" }] }
					}
				},
				{
					"match": "(:)\\s*(\\(.*\\)\\s*->\\s*\\(.*\\))",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#type" }] }
					}
				},
				{
					"match": "(:)\\s*(\\(.*\\)\\s*->\\s*\\w+(<.*?>)?)",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#type" }] }
					}
				},
				{
					"match": "(:)\\s*(\\(.*\\))",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#type" }] }
					}
				},
				{
					"match": "(:)",
					"captures": {
						"1": { "name": "keyword.operator.grain" }
					}
				}
			]
		},
		"data-declarations": {
			"patterns": [
				{
					"match": "\\b(data)\\b\\s+\\b([A-Z]\\w*)\\b\\s*=\\s*\\b([A-Z]\\w*)\\b",
					"captures": {
						"1": { "name": "storage.type.grain" },
						"2": { "name": "entity.name.type.grain" },
						"3": { "name": "support.type.grain" }
					}
				},
				{
					"begin": "\\b(data)\\b\\s+([A-Z]\\w*)(?=\\s*(<.*>\\s*)?=\\s*\\b([A-Z]\\w*)\\b\\s*\\(.*\\))",
					"end": "(?<=\\))",
					"beginCaptures": {
						"1": { "name": "storage.type.grain" },
						"2": { "name": "entity.name.type.grain" }
					},
					"patterns": [
						{ "include": "#type-vector" },
						{ "include": "#type-variant" }
					]
				},
				{
					"begin": "\\b(data)\\b\\s+([A-Z]\\w*\\s*(<.*>\\s*)?)(=)\\s*(\\{)",
					"end": "(\\})",
					"beginCaptures": {
						"1": { "name": "storage.type.grain" },
						"2": { "name": "entity.name.type.grain" },
						"3": { "patterns": [ { "include": "#type-vector" } ] },
						"4": { "name": "keyword.operator.grain" },
						"5": { "name": "punctuation.definition.parameters.begin" }
					},
					"endCaptures": {
						"1": { "name": "punctuation.definition.parameters.end" }
					},
					"patterns": [
						{
							"match": "\\w+(?=\\s*:)",
							"name": "entity.other.grain"
						},
						{
							"include": "#type-annotations"
						},
						{
							"match": ",",
							"name": "punctuation.definition.grain"
						},
						{
							"include": "#comments"
						}
					]
				},
				{
					"comment": "Special highlighting for the List data type in Pervasives.",
					"match": "(data) (List)(<a>) = (\\[\\] \\| \\[(\\.\\.\\.)])(\\(a, List<a>\\))",
					"captures": {
						"1": { "name": "storage.type.grain" },
						"2": { "name": "entity.name.type.grain" },
						"3": { "patterns": [{ "include": "#type-vector" }] },
						"4": { "name": "support.type.grain" },
						"5": { "name": "keyword.operator.grain" },
						"6": { "patterns": [{ "include": "#type" }] }
					}
				},
				{
					"begin": "(data)\\s+([A-Z]\\w*)\\s*=",
					"end": "([A-Z]\\w*(\\(.*\\))?)",
					"beginCaptures": {
						"1": { "name": "storage.type.grain" },
						"2": { "name": "entity.name.type.grain" }
					},
					"endCaptures": {
						"1": {
							"patterns": [
								{ "include": "#type-variant" }
							]
						}
					}
				},
				{
					"begin": "(data)\\s+([A-Z]\\w*)",
					"end": "=",
					"beginCaptures": {
						"1": { "name": "storage.type.grain" },
						"2": { "name": "entity.name.type.grain" }
					},
					"patterns": [
						{ "include": "#type-vector" }
					]
				},
				{
					"begin": "(?=\\|\\s*\\b([A-Z]\\w*)\\b\\s*\\()",
					"end": "(?<=\\))",
					"patterns": [
						{ "include": "#type-variant" }
					]
				},
				{
					"match": "\\|\\s*\\b([A-Z]\\w*)\\b",
					"captures": {
						"1": {
							"name": "support.type.grain"
						}
					}
				}
			]
		},
		"statement": {
			"patterns": [
				{
					"begin": "\\b(if|while)\\b\\s*(\\()",
					"end": "(\\))",
					"beginCaptures": {
						"1": { "name": "keyword.control.grain" },
						"2": { "name": "punctuation.description.parameters.start.grain" }
					},
					"endCaptures": {
						"1": { "name": "punctuation.description.parameters.end.grain" }
					},
					"patterns": [
						{
							"match": ",",
							"name": "punctuation.support.grain"
						},
						{ "include": "#expressions" }
					]
				},
				{
					"match": "\\b(if|else|while)\\b",
					"name": "keyword.control.grain"
				}
			]
		},
		"function-call": {
			"patterns": [
				{
					"begin": "\\b([a-z]\\w*)\\b\\s*(\\()",
					"end": "(\\))",
					"beginCaptures": {
						"1": { "name": "entity.name.function.grain" },
						"2": { "name": "punctuation.description.parameters.start.grain" }
					},
					"endCaptures": {
						"1": { "name": "punctuation.description.parameters.end.grain" }
					},
					"patterns": [
						{
							"match": ",",
							"name": "punctuation.support.grain"
						},
						{ "include": "#expressions" }
					]
				}
			]
		},
		"function-body": {
			"patterns": [
				{
					"begin": "(=>)\\s*(\\{)",
					"end": "(\\})",
					"beginCaptures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "name": "punctuation.definition.parameters.begin.grain" }
					},
					"endCaptures": {
						"1": { "name": "punctuation.definition.parameters.end.grain" }
					},
					"patterns": [
						{ "include": "#expressions" }
					]
				},
				{
					"match": "(=>)\\s*(\\(.*\\))\\s*(?=$|,|\\))",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#expressions" }] }
					}
				},
				{
					"match": "(=>)(.*?)(?=$|,|\\))",
					"captures": {
						"1": { "name": "keyword.operator.grain" },
						"2": { "patterns": [{ "include": "#expressions" }] }
					}
				}
			]
		},
		"block-body": {
			"patterns": [
				{
					"begin": "(?<=\\))\\s*(\\{)",
					"end": "(\\})",
					"beginCaptures": {
						"1": { "name": "punctuation.definition.parameters.begin.grain" }
					},
					"endCaptures": {
						"1": { "name": "punctuation.definition.parameters.end.grain" }
					},
					"patterns": [
						{ "include": "#expressions" }
					]
				},
				{
					"begin": "(?<=else)\\s*(\\{)",
					"end": "(\\})",
					"beginCaptures": {
						"1": { "name": "punctuation.definition.parameters.begin.grain" }
					},
					"endCaptures": {
						"1": { "name": "punctuation.definition.parameters.end.grain" }
					},
					"patterns": [
						{ "include": "#expressions" }
					]
				}
			]
		},
		"records": {
			"patterns": [
				{
					"begin": "(\\{)",
					"end": "(\\})",
					"captures": {
						"1": { "name": "punctuation.description.grain" }
					},
					"patterns": [
						{
							"begin": "\\b(\\w+)\\b\\s*(:)",
							"end": "(?=(,|\\}|#))",
							"beginCaptures": {
								"1": { "name": "entity.name.grain" },
								"2": { "name": "punctuation.description.grain" }
							},
							"patterns": [
								{ "include": "#expressions" }
							]
						},
						{
							"match": "\\b(\\w+)\\b",
							"name": "entity.name.grain"
						},
						{
							"match": ",",
							"name": "punctuation.description.parameters.grain"
						},
						{
							"include": "#comments"
						}
					]
				}
			]
		},
		"lists": {
			"patterns": [
				{
					"begin": "(\\[)",
					"end": "(\\])",
					"captures": {
						"1": { "name": "punctuation.description.grain" }
					},
					"patterns": [
						{ "include": "#expressions" },
						{
							"match": ",",
							"name": "punctuation.description.parameters.grain"
						}
					]
				}
			]
		},
		"arrays": {
			"patterns": [
				{
					"begin": "(\\[>)",
					"end": "(\\])",
					"captures": {
						"1": { "name": "punctuation.description.grain" }
					},
					"patterns": [
						{ "include": "#expressions" },
						{
							"match": ",",
							"name": "punctuation.description.parameters.grain"
						}
					]
				}
			]
		},
		"expressions": {
			"patterns": [
				{ "include": "#comments" },
				{ "include": "#bindings" },
				{ "include": "#function-body" },
				{ "include": "#block-body" },
				{ "include": "#tuple" },
				{ "include": "#records" },
				{ "include": "#arrays" },
				{ "include": "#lists" },
				{ "include": "#match" },
				{ "include": "#pattern" },
				{ "include": "#statement" },
				{ "include": "#function-call" },
				{ "include": "#keywords" },
				{ "include": "#constant" },
				{ "include": "#external-identifier" },
				{ "include": "#identifier" },
				{ "include": "#type-variant-constructor" },
				{ "include": "#type-annotations" }
			]
		},
		"identifier": {
			"patterns": [
				{
					"match": "\\b(box|unbox)\\b",
					"name": "buil"
				},
				{
					"match": "\\b[a-z]\\w*\\b",
					"name": "variable.name.grain"
				},
				{
					"match": "((\\+|-|\\*|\\/|%|<=|>=|<|>|==|:=|\\!|&&|\\|\\||\\.\\.\\.|\\.))",
					"captures": {
						"1": {"name": "keyword.operator.grain" }
					}
				}
			]
		},
		"external-identifier": {
			"patterns": [
				{
					"match": "\\b([A-Z]\\w*)\\b(\\.)",
					"captures": {
						"1": {
							"name": "entity.name.module.grain"
						},
						"2": {
							"name": "keyword.operator.accessor.grain"
						}
					}
				}
			]
		},
		"typed-identifier": {
			"patterns": [
				{
					"match": "\\b([a-z]\\w*)\\b\\s*(:.*)(?=,)",
					"captures": {
						"1": { "name": "variable.name.grain" },
						"2": {
							"patterns": [
								{ "include": "#type-annotations" }
							]
						}
					}
				},
				{
					"match": "\\b([a-z]\\w*)\\b\\s*(:.*)(?=\\))",
					"captures": {
						"1": { "name": "variable.name.grain" },
						"2": {
							"patterns": [
								{ "include": "#type-annotations" }
							]
						}
					}
				},
				{ "include": "#identifier" }
			]
		},
		"constant": {
			"patterns": [
				{ "include": "#number" },
				{ "include": "#strings" },
				{ "include": "#boolean" }
			]
		},
		"boolean": {
			"patterns": [
				{
					"match": "\\b(true|false)\\b",
					"name": "constant.language.grain"
				}
			]
		},
		"number": {
			"patterns": [
				{
					"match": "\\b\\d+\\b",
					"name": "constant.numeric.grain"
				}
			]
		},
		"tuple": {
			"patterns": [
				{
					"begin": "(\\()",
					"end": "(\\))",
					"beginCaptures": {
						"1": { "name": "punctuation.definition.parameters.begin.grain" }
					},
					"endCaptures": {
						"1": { "name": "punctuation.definition.parameters.end.grain" }
					},
					"patterns": [
						{
							"match": ",",
							"name": "punctuation.definition.parameters.grain"
						},
						{ "include": "#expressions" },
						{ "include": "#binding-destructure" }
					]
				}
			]
		},
		"imports": {
			"patterns": [
				{
					"begin": "(?<=import)",
					"end": "(?=from)",
					"patterns": [
						{
							"match": "(\\*|\\,)",
							"name": "punctuation.support.grain"
						},
						{
							"begin": "(?=\\{)",
							"end": "(?<=\\})",
							"patterns": [ { "include": "#expressions" }
							]
						},
						{
							"match": "\\b[A-Z]\\w*\\b",
							"name": "entity.name.module.grain"
						}
					]
				}
			]
		},
		"exports": {
			"patterns": [
				{
					"match": "\\b(export)\\b\\s*(\\*)\\s*\\b(except)\\b(.*?)(?=$|;)",
					"captures": {
						"1": { "name": "keyword.control.grain" },
						"2": { "name": "punctuation.support.grain" },
						"3": { "name": "keyword.control.grain" },
						"4": { "patterns": [{
								"include": "#expressions"
							}]
						}
					}
				},
				{
					"match": "\\b(export)\\b\\s*(\\*)",
					"captures": {
						"1": { "name": "keyword.control.grain" },
						"2": { "name": "punctuation.support.grain" }
					}
				}
			]
		},
		"foreigns": {
			"patterns": [
				{
					"match": "\\b(foreign)\\b((\\s*\\b\\w+\\b){3})\\s*(:.*?)?(?=$|;)",
					"captures": {
						"1": { "name": "keyword.control.grain" },
						"2": {
							"patterns": [{
								"match": "\\b(\\w+)\\b\\s*\\b(\\w+)\\b\\s*\\b(\\w+)\\b",
								"captures": {
									"1": { "name": "variable.language.grain" },
									"2": { "name": "support.constant.grain" }
								}
							}]
						},
						"4": {
							"patterns": [{
								"match": "(:.*)",
								"captures": {
									"1": { "patterns": [{ "include": "#type-annotations" }] }
								}
							}]
						}
					}
				}
			]
		},
		"primitives": {
			"patterns": [
				{
					"begin": "\\b(primitive)\\b",
					"end": "(=)\\s*(('|\").*('|\"))$",
					"beginCaptures": {
						"1": { "name": "keyword.control.grain" }
					},
					"endCaptures": {
						"1": { "name": "keyword.control.grain" },
						"2": {
							"patterns": [{
								"include": "#strings"
							}]
						}
					},
					"patterns": [{
						"include": "#expressions"
					}]
				}
			]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.double.grain",
					"begin": "\"",
					"end": "\"",
					"patterns": [
						{
							"name": "constant.character.escape.grain",
							"match": "\\\\."
						}
					]
				},
				{
					"name": "string.quoted.single.grain",
					"begin": "'",
					"end": "'",
					"patterns": [
						{
							"name": "constant.character.escape.grain",
							"match": "\\\\."
						}
					]
				}
			]
		},
		"keywords": {
			"patterns": [
				{
					"match": "\\b(throw|let|rec|data|while|match|assert|fail|import|export|foreign|primitive|from|except|as)\\b",
					"name": "keyword.control.grain"
				}
			]
		},
		"top-level-statements": {
			"patterns": [
				{ "include": "#imports" },
				{ "include": "#exports" },
				{ "include": "#foreigns" },
				{ "include": "#primitives" },
				{ "include": "#data-declarations" },
				{ "include": "#expressions" },
				{ "include": "#comments" },
				{
					"match": "(;)",
					"captures": {
						"1": { "name": "punctuation.definition.parameters.grain" }
					}
				}
			]
		},
		"program": {
			"patterns": [
				{ "include": "#top-level-statements" }
			]
		},
		"type-var": {
			"patterns": [
				{
					"match": "([a-z]\\w*)",
					"captures": {
						"1": { "name": "variable.language.grain" }
					}
				},
				{
					"match": "([A-Z]\\w*)",
					"captures": {
						"1": { "name": "entity.name.type.grain" }
					}
				},
				{
					"begin": "([A-Z]\\w*)(?=<)",
					"end": "(?<=>)",
					"beginCaptures": {
						"1": { "name": "support.type.grain" }
					},
					"patterns": [
						{ "include": "#type-vector" }
					]
				},
				{
					"begin": "\\(",
					"end": "\\)",
					"patterns": [
						{
							"include": "#type-var"
						}
					]
				}
			]
		},
		"type-vector": {
			"patterns": [
				{
					"begin": "(<)",
					"end": "(>)",
					"captures": {
						"1": { "name": "punctuation.definition.parameters.grain" }
					},
					"patterns": [
						{ "include": "#type-var" },
						{ "include": "#type-constructor" }
					]
				}
			]
		},
		"type-variant": {
			"patterns": [
				{
					"begin": "\\b([A-Z]\\w*)\\b\\s*(\\()",
					"end": "(\\))",
					"beginCaptures": {
						"1": { "name": "support.type.grain" },
						"2": { "name": "support.type.grain" }
					},
					"endCaptures": {
						"1": { "name": "support.type.grain" }
					},
					"patterns": [
						{
							"match": "(,)",
							"captures": {
								"1": { "name": "support.type.grain" }
							}
						},
						{ "include": "#type" }
					]
				},
				{
					"match": "\\b([A-Z]\\w*)\\b",
					"captures": {
						"1": { "name": "support.type.grain" }
					}
				}
			]
		},
		"type-variant-constructor": {
			"patterns": [
				{
					"begin": "\\b([A-Z]\\w*)\\b\\s*(\\()",
					"end": "(\\))",
					"beginCaptures": {
						"1": { "name": "support.type.grain" },
						"2": { "name": "support.type.grain" }
					},
					"endCaptures": {
						"1": { "name": "support.type.grain" }
					},
					"patterns": [
						{
							"match": "(,)",
							"captures": {
								"1": { "name": "support.type.grain" }
							}
						},
						{ "include": "#expressions" }
					]
				},
				{
					"match": "\\b([A-Z]\\w*)\\b",
					"captures": {
						"1": { "name": "support.type.grain" }
					}
				}
			]
		},
		"type-destructor-tuple": {
			"patterns": [
				{
					"begin": "\\(",
					"end": "\\)",
					"patterns": [
						{ "include": "#type-destructor" }
					]
				}
			]
		},
		"type-destructor-list": {
			"patterns": [
				{
					"begin": "(\\[)",
					"end": "(\\])",
					"patterns": [
						{
							"match": "\\b([a-z]\\w*)\\b",
							"captures": {
								"1": { "name": "variable.language.grain" }
							}
						},
						{ 
							"match": ",",
							"name": "punctuation.description.parameters.grain"
						},
						{ 
							"match": "\\.\\.\\.",
							"name": "keyword.operator.grain"
						},
						{ "include": "#type-destructor" }
					]
				}
			]
		},
		"type-destructor-record": {
			"patterns": [
				{
					"begin": "(\\{)",
					"end": "(\\})",
					"patterns": [
						{
							"match": "\\b([a-z]\\w*)\\b\\s*(:)",
							"captures": {
								"1": { "name": "entity.name.grain" },
								"2": { "name": "punctuation.description.parameters.grain" }
							}
						},
						{
							"match": "\\b([a-z]\\w*)\\b",
							"captures": {
								"1": { "name": "variable.language.grain" }
							}
						},
						{ 
							"match": ",",
							"name": "punctuation.description.parameters.grain"
						},
						{ "include": "#type-destructor" }
					]
				}
			]
		},
		"type-destructor": {
			"patterns": [
				{
					"begin": "\\b([A-Z]\\w*)\\b(?=\\s*\\()",
					"end": "(?<=\\))",
					"beginCaptures": {
						"1": { "name": "support.type.grain" }
					},
					"patterns": [
						{
							"begin": "(\\()",
							"end": "(\\))",
							"captures": {
								"1": { "name": "punctuation.definition.parameters.grain" }
							},
							"patterns": [
								{
									"match": "\\b([a-z]\\w*)\\b",
									"captures": {
										"1": { "name": "variable.language.grain" }
									}
								},
								{
									"match": "\\b(_)\\b",
									"captures": {
										"1": { "name": "meta.separator.grain" }
									}
								},
								{
									"match": "(,)",
									"captures": {
										"1": { "name": "support.type.grain" }
									}
								},
								{
									"include": "#type-destructor"
								}
							]
						}
					]
				},
				{ 
					"match": "\\b([a-z]\\w*)\\b",
					"name": "variable.name.grain" 
				},
				{
					"match": "\\b([A-Z]\\w*)\\b",
					"captures": {
						"1": { "name": "support.type.grain" }
					}
				},
				{ 
					"match": "\\b(_)\\b",
					"captures": {
						"1": { "name": "meta.separator.grain" }
					}
				},
				{ "include": "#type-destructor-tuple" },
				{ "include": "#type-destructor-record" },
				{ "include": "#type-destructor-list" }
			]
		},
		"pattern-variant": {
			"patterns": [
				{
					"begin": "(=>)\\s*(\\{)",
					"end": "(\\})",
					"beginCaptures": {
						"1": { "name": "support.type.grain" },
						"2": { "name": "punctuation.definition.parameters.start.grain" }
					},
					"endCaptures": {
						"1": { "name": "punctuation.definition.parameters.end.grain" }
					},
					"patterns": [
						{ "include": "#expressions" }
					]
				},
				{
					"begin": "(=>)",
					"end": "((?=(?!\\|\\|)\\|)(?<!\\|)|(?=\\}))",
					"beginCaptures": {
						"1": { "name": "support.type.grain" }
					},
					"patterns": [
						{ "include": "#expressions" }
					]
				},
				{ "include": "#comments" },
				{ "include": "#type-destructor" }
			]
		},
		"match": {
			"patterns": [
				{
					"begin": "(?=\\b(match)\\b\\s*\\(.*\\)\\s*\\{)",
					"end": "(?<=\\})",
					"patterns": [
						{
							"begin": "(\\{)",
							"end": "(\\})",
							"beginCaptures": {
								"1": { "name": "punctuation.definition.parameters.begin.grain" }
							},
							"endCaptures": {
								"1": { "name": "punctuation.definition.parameters.end.grain" }
							},
							"patterns": [
								{
									"include": "#pattern-variant"
								}
							]
						},
						{
							"begin": "\\b(match)\\b\\s*(\\()",
							"end": "(\\))",
							"beginCaptures": {
								"1": { "name": "keyword.operator.grain" },
								"2": { "name": "punctuation.definition.parameters.begin.grain" }
							},
							"endCaptures": {
								"1": { "name": "punctuation.definition.parameters.end.grain" }
							},
							"patterns": [
								{
									"include": "#expressions"
								}
							]
						}
					]
				},
				{
					"match": "\\b(match)\\b\\s*(?=\\()",
					"captures": {
						"1": { "name": "keyword.operator.grain" }
					}
				}
			]
		},
		"pattern": {
			"patterns": [
				{
					"begin": "\\b(pattern)\\b\\s*(?=\\{)",
					"end": "(?<=\\})",
					"beginCaptures": {
						"1": { "name": "keyword.operator.grain" }
					},
					"patterns": [
						{
							"begin": "(?<=\\||\\{)",
							"end": "(?=\\||\\})",
							"patterns": [
								{
									"include": "#pattern-variant"
								}
							]
						},
						{
							"match": "\\{",
							"name": "punctuation.definition.parameters.begin.grain"
						},
						{
							"match": "\\}",
							"name": "punctuation.definition.parameters.end.grain"
						}
					]
				}
			]
		}
	},
	"scopeName": "source.grain"
}